# OIPM Analysis
This repository contains all of the scripts used to generate and analyze data for the majority of reports conducted by OIPM's data team.


## File structure
```
project
│
└───primary_sources # Scripts to generate data in the most raw form. Data exported to /data which is in .gitignore
|
└───analysis        # Scripts that take data from primary_sources to produce bite-size analyses.
|
└───reports         # Main entry point for generation of final reports. Should use one or more scripts from /analysis.
│   
└───data            # Not included in this repository. Must obtain independently.
|
└───lib             # Shared utilities
```

## Demo
Check out [this dashboard](https://marvinmarnold.github.io/oipm_annual_report) generated by these scripts.

## Primary sources (/primary_sources)
Currently the data sources include:
- Direct connection to IAPro clone
- Bookings data from OPSO 
- Exports from data.nola.gov, including exports from individuals like Ben and Dante

The actual data is not included in this repo. Only scripts used for analysis are here.

## Development
SQL and R scripts are used. 

### SQL
DBeaver on Ubuntu used. Checkout out `/primary_sources/iapro/sql/clone.md` for instructions setting up a similar environment.

As a rule of thumb, all data normalization (recategorizations, null filtering, etc) should happen in SQL as opposed to in R or analysis specific code.

### R
Using Plotly, dplyr, and tidyr packages. 

### Docker
sudo docker run -it --rm \
      -v certs:/etc/letsencrypt \
      -v certs-data:/data/letsencrypt \
      deliverous/certbot \
      certonly \
      --webroot --webroot-path=/data/letsencrypt \
      -d oipm.geeky.rocks -d oipm.geeky.rocks

docker run -d -p 80:80

### Contact
marvin@geeky.rocks

